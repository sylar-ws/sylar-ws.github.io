<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Sylar.W" />
        <meta name="copyright" content="Sylar.W" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="其他, 技术, " />

<meta property="og:title" content="Pelican搭建博客 "/>
<meta property="og:url" content="/pelicanda-jian-bo-ke.html" />
<meta property="og:description" content="0、环境说明 环境：python 2.7 系统：windows 10 64bit 1、安装pelican pip install pelican markdown 安装pelican遇到问题 “UnicodeDecodeError”，参考 笔记 pip install UnicodeDecodeError 2、pelican quickstart 2.1 创建测试目录 test mkdir test 2.2 执行pelican-quickstart pelican-quickstart test 目录的结构 test/ ├── content # 存放输入的源文件 │ └── (pages) # 存放手工创建的静态页面 ├── output # 生成的输出文件 ├── develop_server.sh # 方便开启测试服务器 ├── Makefile # 方便管理博客的Makefile ..." />
<meta property="og:site_name" content="Sylar&#39;s blog" />
<meta property="og:article:author" content="Sylar.W" />
<meta property="og:article:published_time" content="2016-05-16T00:00:00+02:00" />
<meta name="twitter:title" content="Pelican搭建博客 ">
<meta name="twitter:description" content="0、环境说明 环境：python 2.7 系统：windows 10 64bit 1、安装pelican pip install pelican markdown 安装pelican遇到问题 “UnicodeDecodeError”，参考 笔记 pip install UnicodeDecodeError 2、pelican quickstart 2.1 创建测试目录 test mkdir test 2.2 执行pelican-quickstart pelican-quickstart test 目录的结构 test/ ├── content # 存放输入的源文件 │ └── (pages) # 存放手工创建的静态页面 ├── output # 生成的输出文件 ├── develop_server.sh # 方便开启测试服务器 ├── Makefile # 方便管理博客的Makefile ...">

        <title>Pelican搭建博客  · Sylar&#39;s blog
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>Sylar's blog</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            <li ><a href="/pages/about.html">About</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/pelicanda-jian-bo-ke.html"> Pelican搭建博客  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <h2>0、环境说明</h2>
<p>环境：python 2.7
系统：windows 10 64bit</p>
<h2>1、安装pelican</h2>
<p><code>pip install pelican markdown</code></p>
<blockquote>
<p>安装pelican遇到问题 “UnicodeDecodeError”，参考 笔记 <strong>pip install UnicodeDecodeError</strong></p>
</blockquote>
<h2>2、pelican quickstart</h2>
<p>2.1 创建测试目录 test<br />
<code>mkdir test</code></p>
<p>2.2 执行pelican-quickstart<br />
<code>pelican-quickstart</code><br />
test 目录的结构</p>
<div class="highlight"><pre><span></span>test/
├── content              # 存放输入的源文件
│   └── (pages)          # 存放手工创建的静态页面
├── output               # 生成的输出文件
├── develop_server.sh    # 方便开启测试服务器
├── Makefile             # 方便管理博客的Makefile
├── pelicanconf.py       # 主配置文件
└── publishconf.py       # 发布时使用的配置文件
</pre></div>


<p>2.3 在content目录下添加 test.md 文章,<br />
文章开头必须添加一下内容:</p>
<div class="highlight"><pre><span></span><span class="n">Title</span><span class="o">:</span> <span class="n">My</span> <span class="n">First</span> <span class="n">Blog</span>
<span class="n">Date</span><span class="o">:</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">16</span> <span class="mi">10</span><span class="o">:</span><span class="mi">20</span>
<span class="n">Category</span><span class="o">:</span> <span class="n">test</span>
</pre></div>


<p>2.4 生成Blog站点<br />
<code>pelican content</code><br />
output 目录中会生成相关内容</p>
<p>2.5 本地预览
<code>develop_server start 8000</code>
打开浏览器输入地址：http://localhost:8000/ 即可访问.</p>
<h2>3、进一步探索</h2>
<h3>3.1 content/pages</h3>
<p>该目录下存储静态页面，如About、Contact，默认会在导航栏中显示，通过设置<code>DISPLAY_PAGES_ON_MENU</code>不显示。</p>
<blockquote>
<p>If you want to exclude any pages from being linked to or listed in the menu then add a status: hidden attribute to its metadata. This is useful for things like making error pages that fit the generated theme of your site.</p>
</blockquote>
<h3>3.2 引用站内内容</h3>
<h4>3.2.1 引用站内页面</h4>
<blockquote>
<p><strong>Linking to internal content</strong> This makes it easier to link from the current post to other content that may be sitting alongside that post (instead of having to determine where the other content will be placed after site generation).</p>
</blockquote>
<p>比如有如下文件结构</p>
<div class="highlight"><pre><span></span>website/
├── content
│   ├── category/
│   │   └── article1.rst
│   ├── article2.md
│   └── pages
│       └── about.md
└── pelican.conf.py
</pre></div>


<p>article2 引用 article1，<code>article2.md</code>的内容</p>
<div class="highlight"><pre><span></span><span class="n">Title</span><span class="o">:</span> <span class="n">The</span> <span class="n">second</span> <span class="n">article</span>
<span class="n">Date</span><span class="o">:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">01</span> <span class="mi">10</span><span class="o">:</span><span class="mi">02</span>

<span class="n">See</span> <span class="n">below</span> <span class="n">intra</span><span class="o">-</span><span class="n">site</span> <span class="n">link</span> <span class="n">examples</span> <span class="k">in</span> <span class="n">Markdown</span> <span class="n">format</span><span class="o">.</span>

<span class="o">[</span><span class="n">a</span> <span class="n">link</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">the</span> <span class="n">current</span> <span class="n">file</span><span class="o">]({</span><span class="n">filename</span><span class="o">}</span><span class="n">category</span><span class="o">/</span><span class="n">article1</span><span class="o">.</span><span class="na">rst</span><span class="o">)</span>
<span class="o">[</span><span class="n">a</span> <span class="n">link</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">the</span> <span class="n">content</span> <span class="n">root</span><span class="o">]({</span><span class="n">filename</span><span class="o">}/</span><span class="n">category</span><span class="o">/</span><span class="n">article1</span><span class="o">.</span><span class="na">rst</span><span class="o">)</span>
</pre></div>


<p>{filename} 可以理解为关键字，后接相对路径</p>
<h4>3.2.2 引用静态文件</h4>
<p>引用图片(jpg png)、普通文件(pdf txt zip)等，直接在content目录下建立相关目录</p>
<div class="highlight"><pre><span></span>content/images/
content/files/
</pre></div>


<p>引用方式与引用静态页面相似
<code>![Alt Text]({filename}/images/han.jpg)</code></p>
<p><code>pelicanconf.py</code>中的<code>STATIC_PATHS</code>控制哪些目录在生成时拷贝到output目录中</p>
<div class="highlight"><pre><span></span>STATIC_PATHS = [&#39;images&#39;, &#39;pdfs&#39;]
</pre></div>


<blockquote>
<p>默认配置中包含images，其他目录需要手动添加</p>
</blockquote>
<h4>3.2.3 使用 attach 引用静态文件</h4>
<blockquote>
<p>Starting with Pelican 3.5, static files can be “attached” to a page or article using this syntax for the link target: {attach}path/to/file This works like the {filename} syntax, but also relocates the static file into the linking document’s output directory. If the static file originates from a subdirectory beneath the linking document’s source, that relationship will be preserved on output. Otherwise, it will become a sibling of the linking document.</p>
</blockquote>
<p>仅对静态文件有效，并且文件目录配置<code>在STATIC_PATHS</code>中。</p>
<p>比如，有如下目录结构</p>
<div class="highlight"><pre><span></span>content
├── blog
│   ├── icons
│   │   └── icon.png
│   ├── photo.jpg
│   └── testpost.md
└── downloads
    └── archive.zip
</pre></div>


<p><code>pelicanconf.py</code>配置内容：</p>
<div class="highlight"><pre><span></span>PATH = &#39;content&#39;
STATIC_PATHS = [&#39;blog&#39;, &#39;downloads&#39;]
ARTICLE_PATHS = [&#39;blog&#39;]
ARTICLE_SAVE_AS = &#39;{date:%Y}/{slug}.html&#39;
ARTICLE_URL = &#39;{date:%Y}/{slug}.html&#39;
</pre></div>


<p><code>testpost.md</code> 内容：</p>
<div class="highlight"><pre><span></span><span class="nl">Title</span><span class="p">:</span> <span class="n">Test</span> <span class="n">Post</span>
<span class="nl">Category</span><span class="p">:</span> <span class="n">test</span>
<span class="nl">Date</span><span class="p">:</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">31</span>

<span class="o">!</span><span class="p">[</span><span class="n">Icon</span><span class="p">]({</span><span class="n">attach</span><span class="p">}</span><span class="n">icons</span><span class="o">/</span><span class="n">icon</span><span class="p">.</span><span class="n">png</span><span class="p">)</span>
<span class="o">!</span><span class="p">[</span><span class="n">Photo</span><span class="p">]({</span><span class="n">attach</span><span class="p">}</span><span class="n">photo</span><span class="p">.</span><span class="n">jpg</span><span class="p">)</span>
<span class="p">[</span><span class="n">Downloadable</span> <span class="n">File</span><span class="p">]({</span><span class="n">attach</span><span class="p">}</span><span class="o">/</span><span class="n">downloads</span><span class="o">/</span><span class="n">archive</span><span class="p">.</span><span class="n">zip</span><span class="p">)</span>
</pre></div>


<p>生成后，output目录内容</p>
<div class="highlight"><pre><span></span>output
└── 2014
    ├── archive.zip
    ├── icons
    │   └── icon.png
    ├── photo.jpg
    └── test-post.html
</pre></div>


<p>如果同一个静态文件被多次 attach，这个文件的 relocate 只在这些引用中第一个被处理的时候有效，之后该文件的 attach 的处理类似 filename。
如果这些引用位于不同的页面中，那么静态文件 relocate 后的位置将是不确定的，如果有其他站点引用这个静态文件的地址，那么随着多次 build，这些地址很可能会失效。
因此建议只有在<strong>静态文件</strong>只在同一个页面中引用时使用{attach}，或者多个页面时，这些页面都在同一个目录下。</p>
<h4>3.2.4 引用tag和categories</h4>
<div class="highlight"><pre><span></span>{tag}tagname
{category}foobar
</pre></div>


<h3>3.3 语法高亮</h3>
<p>TODO</p>
<h3>3.4 Publishing drafts</h3>
<p>如果想把一片文章发布为 draft (先让朋友试看，在正式发布之前)，可以给文章的metadata添加<code>Status: draft</code>属性，这样的文章会被放到drafts目录下，在首页或是分类查看时都是不可见的。
如果想将所有文章默认发布为 draft，可以在配置文件中添加：</p>
<div class="highlight"><pre><span></span>DEFAULT_METADATA = {
    &#39;status&#39;: &#39;draft&#39;,
}
</pre></div>


<p>这时想要正式发布一篇文章时，需要在metadata添加<code>Status: published</code>属性。</p>
<h2>4、部署</h2>
<h2>5、修改 theme</h2>
<h4>5.1 pelican-themes 工具管理主题</h4>
<p>查看当前安装的主题
<code>pelican-themes -l -v</code></p>
<p>安装新主题,可以依次安装多个</p>
<div class="highlight"><pre><span></span>pelican-themes -vi ~/Dev/Python/pelican-themes/two-column\
                    ~/Dev/Python/pelican-themes/martyalchin \
</pre></div>


<p>删除主题</p>
<div class="highlight"><pre><span></span>pelican-themes --remove two-column
or
pelican-themes -r martyachin notmyidea-cmd -v
</pre></div>


<h4>5.2 设置主题</h4>
<p>在<code>pelicanconf.py</code>中指定</p>
<div class="highlight"><pre><span></span>THEME = &quot;theme&quot;             //默认主题或是使用pelican-themes安装的主题
THEME_STATIC_DIR = &#39;theme&#39;  //THEME_STATIC_PATHS中收集到的静态文件在output中的目录，默认为theme
THEME_STATIC_PATHS = [&#39;static&#39;] //Static theme paths，主题的目录中 static文  
                                //件的目录名，会被拷贝到output下
CSS_FILE = &#39;main.css&#39;       //指定想要加载css文件
</pre></div>


<h2>TODO:</h2>
<ul>
<li>pelican 与本地 github pages目录的结合</li>
<li>文章中插入图片</li>
<li>评论模块-disqus</li>
<li>域名绑定</li>
<li>多种 生成方式的 优劣</li>
<li>Markdown extension 配置</li>
</ul>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2016-05-16T00:00:00+02:00">5月 16, 2016</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#ji-zhu-ref">技术</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#qi-ta-ref">其他
                    <span>1</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>